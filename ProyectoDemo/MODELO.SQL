
DROP TABLE DETALLE
go



DROP TABLE PROG_CICLO
go



DROP TABLE PROFESOR
go



DROP TABLE CURSO
go



DROP TABLE ESPECIALIDAD
go



DROP TABLE MATRICULA
go



DROP TABLE CICLO
go



DROP TABLE ALUMNO
go



CREATE TABLE ALUMNO
( 
	IDALUMNO             integer IDENTITY ( 1,1 ) ,
	CODIGO               varchar(10)  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CLAVE                varchar(100)  NOT NULL ,
	CONSTRAINT XPKALUMNO PRIMARY KEY (IDALUMNO ASC),
	CONSTRAINT XAK1ALUMNO UNIQUE (CODIGO  ASC),
	CONSTRAINT XAK2ALUMNO UNIQUE (NOMBRE  ASC)
)
go



CREATE TABLE CICLO
( 
	CICLO                char(5)  NOT NULL ,
	FEC_INICIO           datetime  NOT NULL ,
	FEC_FIN              datetime  NOT NULL ,
	ACTIVO               integer  NOT NULL ,
	CONSTRAINT XPKCICLO PRIMARY KEY (CICLO ASC)
)
go



CREATE TABLE MATRICULA
( 
	IDMAT                integer IDENTITY ( 1,1 ) ,
	IDALUMNO             integer  NOT NULL ,
	CICLO                char(5)  NOT NULL ,
	ESTADO               integer  NOT NULL ,
	FECHA                datetime  NOT NULL ,
	CONSTRAINT XPKMATRICULA PRIMARY KEY (IDMAT ASC),
	CONSTRAINT R_5 FOREIGN KEY (IDALUMNO) REFERENCES ALUMNO(IDALUMNO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_MATRICULA_CICLO FOREIGN KEY (CICLO) REFERENCES CICLO(CICLO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE ESPECIALIDAD
( 
	IDESPE               integer  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKESPECIALIDAD PRIMARY KEY (IDESPE ASC)
)
go



CREATE TABLE CURSO
( 
	IDCURSO              integer IDENTITY ( 1,1 ) ,
	CODIGO               varchar(10)  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CREDITOS             integer  NOT NULL ,
	IDESPE               integer  NOT NULL ,
	CONSTRAINT XPKCURSO PRIMARY KEY (IDCURSO ASC),
	CONSTRAINT XAK1CURSO UNIQUE (CODIGO  ASC),
	CONSTRAINT XAK2CURSO UNIQUE (NOMBRE  ASC),
	CONSTRAINT FK_CURSO_ESPECIALIDAD FOREIGN KEY (IDESPE) REFERENCES ESPECIALIDAD(IDESPE)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE PROFESOR
( 
	IDPROFESOR           integer IDENTITY ( 1,1 ) ,
	CODIGO               varchar(10)  NOT NULL ,
	NOMBRE               varchar(100)  NOT NULL ,
	CONSTRAINT XPKPROFESOR PRIMARY KEY (IDPROFESOR ASC),
	CONSTRAINT XAK1PROFESOR UNIQUE (CODIGO  ASC),
	CONSTRAINT XAK2PROFESOR UNIQUE (NOMBRE  ASC)
)
go



CREATE TABLE PROG_CICLO
( 
	IDPROG               integer IDENTITY ( 1,1 ) ,
	CICLO                char(5)  NOT NULL ,
	IDCURSO              integer  NOT NULL ,
	IDPROFESOR           integer  NULL ,
	HORARIO              varchar(30)  NOT NULL ,
	CONSTRAINT XPKPROG_CICLO PRIMARY KEY (IDPROG ASC),
	CONSTRAINT FK_PROG_CICLO_CICLO FOREIGN KEY (CICLO) REFERENCES CICLO(CICLO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_PROG_CICLO_CURSO FOREIGN KEY (IDCURSO) REFERENCES CURSO(IDCURSO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_PROG_CICLO_PROFESOR FOREIGN KEY (IDPROFESOR) REFERENCES PROFESOR(IDPROFESOR)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE DETALLE
( 
	IDMAT                integer  NOT NULL ,
	IDPROG               integer  NOT NULL ,
	ACTIVO               integer  NOT NULL ,
	CONSTRAINT XPKDETALLE PRIMARY KEY (IDMAT ASC,IDPROG ASC),
	CONSTRAINT R_7 FOREIGN KEY (IDMAT) REFERENCES MATRICULA(IDMAT)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT R_8 FOREIGN KEY (IDPROG) REFERENCES PROG_CICLO(IDPROG)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


